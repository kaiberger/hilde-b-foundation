<!doctype html>
<html>
<head>
  <title>Select Role</title>
</head>
<body>
  <h1>Review & Sign Your Documents</h1>

  <form action="/sign" method="POST">
    <label for="role">Select Your Role:</label>
    <select name="role" id="role" onchange="updatePreview()">
      {% for role in roles %}
        <option value="{{ role }}">{{ role.replace("_", " ").title() }}</option>
      {% endfor %}
    </select>

    <button type="button" onclick="previewPDFs()">Preview Documents</button>
    <br><br>

    <label for="name">Full Legal Name:</label>
    <input type="text" name="name" required><br><br>

    <label for="email">Email Address:</label>
    <input type="email" name="email" required><br><br>

    <label for="signature">Type Signature:</label>
    <input type="text" name="signature" required><br><br>

    <p>
      By signing, you confirm that you are authorized to represent this role and agree to the terms of the selected documents.
      You affirm that your name and signature are legally binding, and that the email address provided is under your control.
    </p>

    <input type="submit" value="Sign and Submit">
  </form>

  <script>
    const roleToPDFs = {
      "volunteer": [
        "volunteer_agreement.pdf",
        "nda.pdf",
        "privacy_policy.pdf"
      ],
      "donor": [
        "donor_agreement.pdf",
        "media_release.pdf",
        "privacy_policy.pdf"
      ],
      "board_member": [
        "board_member_agreement.pdf",
        "conflict_policy.pdf",
        "nda.pdf",
        "expense_policy.pdf"
      ]
    };

    function updatePreview() {
      const role = document.getElementById("role").value;
      console.log("Selected role:", role);
    }

    function previewPDFs() {
      const role = document.getElementById("role").value;
      const container = window.open("", "_blank");
      const files = roleToPDFs[role] || [];
      container.document.write("<h2>Documents for Preview:</h2>");
      files.forEach(file => {
        const path = `/static/pdf_templates/${file}`;
        container.document.write(`<p><a href="${path}" target="_blank">${file}</a></p>`);
      });
    }
  </script>
</body>
</html>
